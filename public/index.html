<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="shortcut icon" href="./favicon.ico">
    <title>Document</title>

    <script src="https://cdn.jsdelivr.net/npm/vue"></script>

    <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/notosanskr.css">
    <link rel="stylesheet" href="./master.css">

    <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-database.js"></script>

    <script src="init.js"></script>

</head>

<body>
    <div id="app" @click.stop="closeAll" @contextmenu.prevent="">
        <div class="non-clickable">
            <a href="./db-management.html" class="db-management-link">DB 관리</a>
            <div id="procSelect">
                <button :class="{selected:s.check}" v-for="(s, i) in proc" @click.stop="for (let e in proc) {proc[e].check = false;} s.check=true;">{{s.name}}</button>
                <span>스킬별로 장비 및 스탯을 입력해주어야합니다</span>
            </div>
            <equipment-component :equipment-data="model.equipment" :current-equipments="equipments" :proc="proc"></equipment-component>
            <calc-proc-component :proc="proc" :buff="buff"></calc-proc-component>
        </div>
    </div>
</body>

<!-- equipment Begin -->
<script type="text/x-template" id="equipmentComponent">
    <div class='menuParent'>
        <div v-for="(s, k, i) in equipmentData">
            <div class="partsName" @click.stop="currentEquipments[getProc(proc)][i].name = ''; currentEquipments[getProc(proc)][i].set = null, currentEquipments[getProc(proc)][i].ab = []; let temp = !currentEquipments[getProc(proc)][i].show; closeAll(); currentEquipments[getProc(proc)][i].show = temp;">
                <span>{{k}}</span>
            </div>
            <div class="selectedEquipmentName">
                <span>{{currentEquipments[getProc(proc)][i].name}}</span>
            </div>
            <div class="equipmentsName" v-show="currentEquipments[getProc(proc)][i].show">
                <span v-for="(ss, ii) in s" @click="
                currentEquipments[getProc(proc)][i].set = null;
                currentEquipments[getProc(proc)][i].ab = [];
                for (let e in ss) {
                    currentEquipments[getProc(proc)][i][e] = ss[e];
                }
                    ">{{ss.name}}</span>
            </div>
        </div>
        <div>
        </div>
    </div>
</script>
<!-- equipment End -->

<!-- calc proc Begin -->
<script id="calcProcComponent" type="text/x-template">
    <div class="proc">
        <div id="procStat">
            <span>스탯</span>
            <input type="text" v-for="(s, i) in proc" v-model.number="s.stat" v-show="s.check">
        </div>
        <div id="procCalc">
            <button id="calc" @click="buff.calc();">계산</button>
        </div>
        <div id="result">
            <span>적용 스탯 {{buff.applyStat}} / 스킬 레벨 {{buff.level}}</span>
            <br>
            <span v-for="(s, k, i) in buff.result">{{k}} {{s}} / </span>
            <br>
            <span v-show="buff.name === '영축' || buff.name === '아포'">(영축과 아포는 2각 풀스택 기준입니다)</span>
            <span v-show="buff.name === '용축' || buff.name === '크오빅'">(아리아)</span>
            <span v-for="(s, k, i) in buff.result" v-show="buff.name === '용축' || buff.name === '크오빅'">{{k}}: {{Math.round(s*1.25)}}, </span>
            <span v-show="buff.name === '용축' || buff.name === '크오빅'"><br>아리아 증폭 옵션은 아직 적용하지 않아, 25%로 계산합니다.</span>
        </div>
    </div>
</script>
<!-- calc proc End -->

<script src="./index.js"></script>

</html>